(window.webpackJsonp=window.webpackJsonp||[]).push([[156],{499:function(t,a,s){"use strict";s.r(a);var n=s(42),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"搭建内网pip源"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#搭建内网pip源"}},[t._v("#")]),t._v(" 搭建内网pip源")]),t._v(" "),s("h2",{attrs:{id:"下载依赖包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#下载依赖包"}},[t._v("#")]),t._v(" 下载依赖包")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("pip "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" pip2pi\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建目录")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" ~/pypi\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 下载依赖包")]),t._v("\npip2tgz ~/pypi -r requirements.txt\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 建立索引，该命令会创建simple文件夹")]),t._v("\ndir2pi ~/pypi\n")])])]),s("h2",{attrs:{id:"启动服务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动服务"}},[t._v("#")]),t._v(" 启动服务")]),t._v(" "),s("h3",{attrs:{id:"使用pypiserver"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用pypiserver"}},[t._v("#")]),t._v(" 使用pypiserver")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("pip "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" pypiserver\npypi-server -p "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8080")]),t._v(" ~/pypi\n")])])]),s("h3",{attrs:{id:"使用nginx"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用nginx"}},[t._v("#")]),t._v(" 使用nginx")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" /etc/nginx/conf.d/default.conf\n\nlocation / "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\troot /usr/share/nginx/html/pypi"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tautoindex on"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# autoindex_exact_size off; 文件大小")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# autoindex_localtime on; 文件时间")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# limit_rate_after 5m; 5分钟后限制速率；")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# limit_rate 200k; # 速率限制为200k/s")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"修改pip源"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#修改pip源"}},[t._v("#")]),t._v(" 修改pip源")]),t._v(" "),s("h3",{attrs:{id:"临时修改"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#临时修改"}},[t._v("#")]),t._v(" 临时修改")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("pip "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -i http://localhost:8080/simple/ django\n")])])]),s("h3",{attrs:{id:"永久修改"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#永久修改"}},[t._v("#")]),t._v(" 永久修改")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" ~/.pip/pip.conf\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("global"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nindex-url "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" https://localhost:8080/simple/\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("install"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\ntrusted-host"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("localhost\n")])])])])}),[],!1,null,null,null);a.default=e.exports}}]);